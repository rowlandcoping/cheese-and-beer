{% extends "base.html" %}

{% block title %}
Cheese and Beer - Admin Console
{% endblock %}

{% block content %}
<div id="product-alert" class="delete-alert not-displayed">
    <div class="alert-header">
        <h4>Confirm Deletion</h4>
        <i class="fa-solid fa-xmark cancel-alert"></i>

    </div>
    <div class="alert-content">
        <strong>
            <p id="alert-name"></p>
        </strong>
            <p>Are you sure you want to delete this product?</p>        
    </div>
    <div class="alert-footer">
        <a id="remove-product" href="">
            <span class="alert-buttons yes-button">Yes</span>
        </a>
        <span class="alert-buttons cancel-alert no-button">
            No
        </span>
    </div>
</div>
<div id="product-update">
    <h1>Update or Remove Products</h1>
    <h2>Search here to filter by Product ID or name:</h2>
    <form method="GET" action="{% url 'edit_product' %}">
        <div class="input-group w-100">
            <input type="text" name="q" placeholder="Search">
            <div>
                <button type="submit">
                    <span>
                        <i>search</i>
                    </span>
                </button>
            </div>
        </div>
    </form>
        {% if products %}
        {% if search_term %}
        <h3>Search results for "{{ search_term }}"</h3>
        {% endif %}
        {% for product in products %}
        <h3 id="name-{{ product.id }}">{{ product.name }}</h3>
            <a href="{% url 'product_edit' product.id %}"> Edit</a>
            {% if product.units_sold == 0 %}
            <span class="delete-product" id="delete-{{ product.id }}">
                Delete
            </span>
            {% endif %}
        </h3>
        {% endfor %}
        {% else %}
        <h3>No Products Found, please check your search term and try again!</h3>
        {% endif %}
        <h2>
            <a href="{% url 'admin_console' %}">Back to Admin Console</a>
            <br>
            <a href="{% url 'home' %}">Back to Homepage</a>
        </h2>
  </div>

  {% endblock %}